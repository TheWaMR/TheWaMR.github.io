<!DOCTYPE html>
<html lang="en-us"
  x-data
  :class="$store.darkMode.class()"
  :data-theme="$store.darkMode.theme()">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Atmega32U4 | Will&#39;s Portfolio</title>

    

<link rel="canonical" href="/posts/atmega32u4_test/" />



<meta name="author" content="Will Rohren" />
<meta name="description" content="Goal: To create my own microcontroller devboard based on the Atmega32U4
To learn about embedded systems, designing PCB for digital circuitry, and programming/debugging the board.
STATUS: Work In Progress
" />


<meta name="keywords" content="Electronics,Tag2">



<meta name="generator" content="Hugo 0.145.0">


<meta property="og:url" content="/posts/atmega32u4_test/">
  <meta property="og:site_name" content="Will&#39;s Portfolio">
  <meta property="og:title" content="Atmega32U4">
  <meta property="og:description" content="Goal: To create my own microcontroller devboard based on the Atmega32U4
To learn about embedded systems, designing PCB for digital circuitry, and programming/debugging the board.
STATUS: Work In Progress">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2025-02-21T08:52:58-06:00">
    <meta property="article:modified_time" content="2025-02-21T08:52:58-06:00">
    <meta property="article:tag" content="Electronics">
    <meta property="article:tag" content="Tag2">
    <meta property="og:image" content="/32u4.jpgg">




  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:image" content="/32u4.jpgg">
  <meta name="twitter:title" content="Atmega32U4">
  <meta name="twitter:description" content="Goal: To create my own microcontroller devboard based on the Atmega32U4
To learn about embedded systems, designing PCB for digital circuitry, and programming/debugging the board.
STATUS: Work In Progress">




  

<link rel="stylesheet" href="/css/output.min.css" />




    


<style>
  pre {
    padding: 1em;
    overflow: auto;
  }
</style>









    

    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
  </head>

  <body x-data="{
    flip: false,
  }">
    
    <div id="dream-global-bg"></div>

    
<nav class="mt-4 lg:mt-8 py-4">

  
  <div class="container flex justify-between px-4">
  
    <section class="flex items-center gap-4">
      <div class="avatar cursor-pointer hover:online" @click="flip = !flip" title="Flip it!">
        <div class="h-10 rounded-full">
          <img src="/face_zoomed.png" alt="" />
        </div>
      </div>

      
    </section>

    <div class="dropdown dropdown-end sm:hidden">
      <div tabindex="0" role="button" class="btn btn-ghost btn-square" aria-label="Select an option">
        <ion-icon name="menu" class="text-2xl"></ion-icon>
      </div>
      <ul tabindex="0" class="dropdown-content menu w-36 bg-base-100 rounded-box z-[1] shadow-md">
        


<li>
  <div role="link" tabindex="0" class="inline-flex items-center p-2 cursor-pointer" @click="flip = !flip" title="About">
    <ion-icon name="information-circle"></ion-icon>About</div>
</li>





















<li>
  <a class="inline-flex items-center p-2 cursor-pointer" href="/posts" title="Archives">
    <ion-icon name="archive"></ion-icon>
    Archives
  </a>
</li>




<li>
  <a class="inline-flex items-center p-2 cursor-pointer" href="/categories" title="All Categories">
    <ion-icon name="grid"></ion-icon>
    All Categories
  </a>
</li>




<li>
  <a class="inline-flex items-center p-2 cursor-pointer" href="/tags" title="All Tags">
    <ion-icon name="pricetags"></ion-icon>
    All Tags
  </a>
</li>






      </ul>
    </div>
    <section class="hidden sm:flex sm:items-center sm:gap-2 md:gap-4">
      
      
      
      <div role="link" tabindex="0"
        class="text-sm font-semibold cursor-pointer hover:underline"
        @click="flip = !flip"
        title="About"
      >About</div>
      
      

      
      

      

      
      
      
      





      
      





      

      <div class="dropdown dropdown-end dropdown-hover">
        <div tabindex="0" role="button" class="group inline-flex items-center p-2 rounded-full cursor-pointer hover:bg-primary" aria-label="Select an option">
          <ion-icon class="group-hover:text-primary-content text-xl" name="menu"></ion-icon>
        </div>
        <ul tabindex="0" class="dropdown-content menu w-36 bg-base-100 rounded-box z-[1] shadow-xl">
          
          
<li>
  <a class="inline-flex items-center p-2 cursor-pointer" href="/posts" title="Archives">
    <ion-icon name="archive"></ion-icon>
    Archives
  </a>
</li>


          
          
<li>
  <a class="inline-flex items-center p-2 cursor-pointer" href="/categories" title="All Categories">
    <ion-icon name="grid"></ion-icon>
    All Categories
  </a>
</li>


          
          
<li>
  <a class="inline-flex items-center p-2 cursor-pointer" href="/tags" title="All Tags">
    <ion-icon name="pricetags"></ion-icon>
    All Tags
  </a>
</li>


          

          
        </ul>
      </div>
      
    </section>
  </div>
</nav>


    <div class="flip-container" :class="{ 'flip-it': flip }">
      <div class="flipper">
        <div class="front">
          <div class="container">
            
<div class="lg:grid lg:grid-cols-4 gap-4 mt-4 px-4">
  <div class="hidden lg:block">
    
  </div>

  <div class="lg:col-span-2">
    <article class="mx-auto prose prose-quoteless dark:prose-invert" id="dream-single-post-main" itemscope itemtype="http://schema.org/Article">
      
  <meta itemprop="name" content="Atmega32U4">
  <meta itemprop="description" content="Goal: To create my own microcontroller devboard based on the Atmega32U4
To learn about embedded systems, designing PCB for digital circuitry, and programming/debugging the board.
STATUS: Work In Progress">
  <meta itemprop="datePublished" content="2025-02-21T08:52:58-06:00">
  <meta itemprop="dateModified" content="2025-02-21T08:52:58-06:00">
  <meta itemprop="wordCount" content="764">
  <meta itemprop="image" content="/32u4.jpgg">
  <meta itemprop="keywords" content="Electronics,Tag2">

      <header>
        <h1 itemprop="headline">Atmega32U4</h1>
        <p class="text-sm">
          
            Friday, Feb 21, 2025
          

          | <span>4 minute read</span>

          
          | <span>Updated at
            
              Friday, Feb 21, 2025
            </span>
          
        </p>

        
        <div class="flex justify-between">
          
            <div class="flex items-center">
  
  <div class="avatar mr-1">
    <div class="w-8 rounded-full">
      <img class="my-0" src="/face_zoomed.png" alt="Will Rohren" />
    </div>
  </div>
  

  <span itemprop="author" itemscope itemtype="https://schema.org/Person">
  
    
      <span itemprop="name">Will Rohren</span>
    
  
  </span>
</div>

          

          <div class="flex items-center gap-2">
  
  

  
  
  
  
  
    <a class="group inline-flex items-center p-2 rounded-full cursor-pointer hover:bg-primary"
      href="https://x.com/intent/post?text=Atmega32U4&amp;url=/posts/atmega32u4_test/" target="_blank" rel="noopener noreferrer"
      title="Share on X">
      <ion-icon class="group-hover:text-primary-content" name="logo-x"></ion-icon>
    </a>
  
    <a class="group inline-flex items-center p-2 rounded-full cursor-pointer hover:bg-primary"
      href="https://facebook.com/sharer/sharer.php?u=/posts/atmega32u4_test/" target="_blank" rel="noopener noreferrer"
      title="Share on Facebook">
      <ion-icon class="group-hover:text-primary-content" name="logo-facebook"></ion-icon>
    </a>
  
    <a class="group inline-flex items-center p-2 rounded-full cursor-pointer hover:bg-primary"
      href="https://wa.me/?text=Atmega32U4%20/posts/atmega32u4_test/" target="_blank" rel="noopener noreferrer"
      title="Share on WhatsApp">
      <ion-icon class="group-hover:text-primary-content" name="logo-whatsapp"></ion-icon>
    </a>
  

  
  
</div>

        </div>
      </header>

      <section id="dream-single-post-content" itemprop="articleBody">
        

        <p>Goal:
To create my own microcontroller devboard based on the Atmega32U4</p>
<p>To learn about embedded systems, designing PCB for digital circuitry,
and programming/debugging the board.</p>
<p><strong>STATUS:</strong>  Work In Progress</p>
<h1 id="hahahugoshortcode7s0hbhb"><a href="/">Back to Home Page</a>
</h1>
<h2 id="motivation-81324">Motivation 8/13/24</h2>
<p>Mostly to experience the pitfalls of embedded systems. I know I can go out and buy an arduino Leonardo for about $25, but I have been curious about digital pcb design for a while, so I figured I would give it a try. The arduino project is also open source, which would give me plenty of resources, and examples to look at if I get stuck.</p>
<p>This project is <strong>heavily</strong> inspired by <a href="https://bio.site/curiousscientist" target="_blank">The Curious Scientist</a>
, so please check him out. I did not directly use any of his work, but he led me to the microcontroller used, the Atmega32U4, which is also found in the Arduino Leonardo. All other features were built by me.</p>
<h2 id="the-design-92424">The Design 9/24/24</h2>
<p>All projects start somewhere, and the image below shows one of the first iterations of the pcb layout. It being a devboard, I only needed to make the μCU work, with very few additional features.</p>
<p><img src="V1_Early.png" alt="V1 early design"></p>
<p>I initially chose this design of having the pin headers in two perpendicular rows, but after considering the size of the actual chip, and how much wasted space there was on the board, I opted for a staggered design. This would condense the pins, allowing me to reduce the overall size. Additionally, I allotted 8 pins in a 2x4 configuration, 6 for In-Circuit-Serial-Programming (ICSP), and two more for TX/RX. (Ground &amp; Power planes have been hidden, but are on the inner layers of this 4 layer board).</p>
<p><img src="V1_Design.png" alt="V1 final design"></p>
<h2 id="first-prototype-11724">First Prototype 11/7/24</h2>
<p>I was happy with the design, so I sent it off to get manufactured, ordered my own components of DigiKey, spent about 2 hours assembling my first board, and verified that I could upload the bootloader to it. I excitedly made a post in <a href="https://www.starforgefoundry.com/" target="_blank">Starforge&rsquo;s Discord</a>
, a local makerspace in college station, and was informed about a critical flaw in my USB-C implementation.</p>
<p>The flaw was that I left the CC pins floating, which meant that when I connected it to my computer, no connection was established. I couldn&rsquo;t program the board through the USB-C port.</p>
<p><img src="32u4.jpg" alt="V1">
<img src="workspace.jpg" alt="test image"></p>
<p>Luckily, I could still program via ICSP, it just required I keep the bundle of 6 wires attached anytime I wanted to upload a new program. This kept me going, and I continued on. I kept going, and was able to get some LEDs to blink, but I was growing frustrated with the awkwardness of the programming setup.</p>
<p><img src="ICSP_prog.jpg" alt="ICSP Programming">
<img src="V1_Lights.jpg" alt="V1 Lights"></p>
<h2 id="second-prototype-12425">Second Prototype 1/24/25</h2>
<p>During this time as well, I took note of a few other changes I wanted to make, layout-wise, and edited my design in Altium.
I was a bit more careful to make sure the pin spacings throughout the board would fit on a regular breadboard, and I changed the main IO layout from staggered to an inline position. I also added the pulldown resistors to the CC lines, and moved some components around to waste less space. In the image below, V1 is on the left, and V1.1 is on the right.</p>
<p><img src="Redesign.png" alt="Redesign"></p>
<p>After some shipping delays from Hong Kong due to current events, the V1.1 of my design arrived, and I put it together when I found some time.</p>
<h1 id="heading"><strong>[INSERT IMAGE OF PHYSCIAL v1.1 PICTURE]</strong></h1>
<p>After uploading the arduino Leonardo bootloader onto the chip, everything worked as expected! It&rsquo;s still a little bit awkward to use on a breadboard, because the board covers the entire width, but it will at least be secure. I also messed around with an oscilloscope to measure the transient behavior, to see the rise/fall times of the built-in RX LED.</p>
<p><img src="V1_1_blink.gif" alt="Blinking!">
<img src="rise_time.png" alt="Rise time">
<img src="power_off.png" alt="Shutdown behavior"></p>
<h2 id="going-forward">Going forward</h2>
<p>As of writing this (3/3/25), the semester has gotten busy again, and I&rsquo;m shifting my priorities from working on summer plans rather than furthering my projects. So everything will be on hold while I finish documenting everything.</p>
<p>When I return, though, I think that this board is good enough to try again with the A4988 motor controller board. The behavior is less random, and I can easily upload new programs to try different things. For a V1.2, I think that I would like to reduce the board width by 0.1&quot;, enough to allow for it to not take up the whole width of the breadboard. To do this, I will likely have to trade shorter width for a longer height, since there aren&rsquo;t really any deadspaces left on the PCB.</p>
<p>Unrelated, but here&rsquo;s another thing I made:</p>
<p><img src="/maxwell.gif" alt="Spinning Cat"></p>
<h1 id="hahahugoshortcode7s1hbhb"><a href="/">Back to Home Page</a>
</h1>

        
      </section>

      

      
    </article>
  </div>

  <div class="hidden lg:flex lg:flex-col lg:items-end">
    
  </div>
</div>


            
<footer class="flex justify-between items-center gap-2 px-4 py-12">

  <div>
  
  <p>© 2025 Will&#39;s Portfolio</p>
  

  
  <p class="text-sm">
    <span class="text-base-content/60">
      Powered by <a class="hover:underline" href="https://gohugo.io/" target="_blank">Hugo</a> with 
      <a class="hover:underline" href="https://github.com/g1eny0ung/hugo-theme-dream" target="_blank">Dream</a>.</span
    >
  </p>
  
</div>

  <div
  x-data="{ icons: [
    { name: 'moon', status: 'y' },
    { name: 'sunny', status: 'n' },
    { name: 'desktop', status: 'auto' }
  ] }"
  class="flex items-center gap-2 h-[32px] px-2 bg-base-100 border border-base-content/30 rounded-full"
>
  <template x-for="icon in icons">
    <div
      role="button"
      tabindex="0"
      :aria-label="'Select ' + icon.name + ' mode'"
      class="group inline-flex justify-center items-center p-1 rounded-full cursor-pointer hover:bg-primary"
      :class="$store.darkMode.icon() === icon.name && 'bg-primary'"
      @click="$store.darkMode.toggle(icon.status)"
    >
      <ion-icon
        :name="`${icon.name}-outline`"
        class="group-hover:text-primary-content"
        :class="$store.darkMode.icon() === icon.name && 'text-primary-content'"
      >
      </ion-icon>
    </div>
  </template>
</div>

</footer>

          </div>
        </div>
        <div class="back">
          <div class="container">
            
            <div class="dream-grid dream-grid-about">
  
  
  
  <div class="w-full md:w-1/2 lg:w-1/3 xl:w-1/4 p-4 dream-column">
    <article
      class="card card-compact bg-base-100 hover:bg-base-content/10 shadow-xl dark:border dark:border-base-content/30"
    >
      <div class="card-body">
        <div class="card-title">Contact Information</div>

        <div class="prose dark:prose-invert">
          <p>Email: <a href="mailto:wmrohren@gmail.com" target="_blank">wmrohren@gmail.com</a>
</p>
<p>Resume: <a href="./Resume_1-22-25.pdf">here</a>
 (last updated 1/22/25)</p>
<p>Feel free to email with any questions :)</p>

        </div>
      </div>
    </article>
  </div>
  
  <div class="w-full md:w-1/2 lg:w-1/3 xl:w-1/4 p-4 dream-column">
    <article
      class="card card-compact bg-base-100 hover:bg-base-content/10 shadow-xl dark:border dark:border-base-content/30"
    >
      <div class="card-body">
        <div class="card-title">Current Projects</div>

        <div class="prose dark:prose-invert">
          <p>Priority:</p>
<ul>
<li>Personal: AtMega32U4</li>
<li>RPS: Plasma Cutter</li>
</ul>
<p>When I feel like it:</p>
<ul>
<li>Personal: A4988, Battery Charger</li>
<li>RPS: LF3DP</li>
</ul>

        </div>
      </div>
    </article>
  </div>
  
  <div class="w-full md:w-1/2 lg:w-1/3 xl:w-1/4 p-4 dream-column">
    <article
      class="card card-compact bg-base-100 hover:bg-base-content/10 shadow-xl dark:border dark:border-base-content/30"
    >
      <div class="card-body">
        <div class="card-title">Me</div>

        <div class="prose dark:prose-invert">
          <p>Howdy!</p>
<p>I am William Rohren, and I am a junior Mechanical Engineering Major at Texas A&amp;M University.
This site serves as a portfolio to display my various projects, as well as a blog so that I
can have a log of the things I do.</p>
<p>I currently am a student worker for the Rapid Prototyping Studio within the MEEN department of A&amp;M. Any posts/projects tagged with &lsquo;RPS&rsquo; represent things I have done while working at the RPS.</p>
<p>I&rsquo;ve done markdown with the RPS, but setting that up is entirely new to me.</p>

        </div>
      </div>
    </article>
  </div>
  
  

  

  
</div>

            

            
<footer class="flex justify-between items-center gap-2 px-4 py-12">

  <div>
  
  <p>© 2025 Will&#39;s Portfolio</p>
  

  
  <p class="text-sm">
    <span class="text-base-content/60">
      Powered by <a class="hover:underline" href="https://gohugo.io/" target="_blank">Hugo</a> with 
      <a class="hover:underline" href="https://github.com/g1eny0ung/hugo-theme-dream" target="_blank">Dream</a>.</span
    >
  </p>
  
</div>

  <div
  x-data="{ icons: [
    { name: 'moon', status: 'y' },
    { name: 'sunny', status: 'n' },
    { name: 'desktop', status: 'auto' }
  ] }"
  class="flex items-center gap-2 h-[32px] px-2 bg-base-100 border border-base-content/30 rounded-full"
>
  <template x-for="icon in icons">
    <div
      role="button"
      tabindex="0"
      :aria-label="'Select ' + icon.name + ' mode'"
      class="group inline-flex justify-center items-center p-1 rounded-full cursor-pointer hover:bg-primary"
      :class="$store.darkMode.icon() === icon.name && 'bg-primary'"
      @click="$store.darkMode.toggle(icon.status)"
    >
      <ion-icon
        :name="`${icon.name}-outline`"
        class="group-hover:text-primary-content"
        :class="$store.darkMode.icon() === icon.name && 'text-primary-content'"
      >
      </ion-icon>
    </div>
  </template>
</div>

</footer>

          </div>
        </div>
      </div>
    </div>

    <script>
  window.lightTheme = "emerald"
  window.darkTheme = "forest"
</script>


  <script src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script>

  
  
    
  
  <script src="/js/grid.min.js"></script>




  

<script src="/js/main.min.js"></script>

    









    

    

    

    

    <script type="module" src="https://unpkg.com/ionicons@7.4.0/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@7.4.0/dist/ionicons/ionicons.js"></script>
  </body>
</html>
